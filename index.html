<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun with Functions | ‡πÄ‡∏Å‡∏°‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Background Particles/Shapes -->
        <div class="bg-shape shape-1"></div>
        <div class="bg-shape shape-2"></div>
        <div class="bg-shape shape-3"></div>

        <!-- AI Helper (Always present but hidden in some views if needed) -->
        <div class="ai-helper-container" id="aiHelper">
            <img src="assets/ai_math_helper.png" alt="AI Helper" class="ai-avatar floating">
            <div class="ai-bubble" id="aiMessage">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ! ‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞</div>
        </div>

        <!-- VIEW: LOGIN -->
        <section id="view-login" class="view active">
            <div class="glass-panel login-panel">
                <h1 class="game-title">FUN <span>WITH</span> FUNCTIONS</h1>
                <p class="subtitle">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô</p>
                <form id="loginForm">
                    <div class="input-group">
                        <input type="text" id="playerName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì..." required maxlength="15">
                    </div>
                    <button type="submit" class="btn-primary pulse">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                </form>
            </div>
        </section>

        <!-- VIEW: MAIN MENU -->
        <section id="view-menu" class="view hidden">
            <div class="glass-panel menu-panel">
                <header class="menu-header">
                    <h2>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <span id="displayPlayerName">Player</span></h2>
                    <div class="player-stats-mini">
                        <span class="badge-xp">XP: <span id="menuXP">0</span></span>
                    </div>
                </header>
                
                <h3 class="section-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</h3>
                <div class="level-grid">
                    <button class="level-card" onclick="game.startLevel(1)">
                        <div class="level-icon">‚ùì</div>
                        <div class="level-info">
                            <h4>‡∏î‡πà‡∏≤‡∏ô 1</h4>
                            <p>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?</p>
                        </div>
                    </button>
                    <button class="level-card" onclick="game.startLevel(2)">
                        <div class="level-icon">üîó</div>
                        <div class="level-info">
                            <h4>‡∏î‡πà‡∏≤‡∏ô 2</h4>
                            <p>‡πÇ‡∏î‡πÄ‡∏°‡∏ô & ‡πÄ‡∏£‡∏ô‡∏à‡πå</p>
                        </div>
                    </button>
                    <button class="level-card" onclick="game.startLevel(3)">
                        <div class="level-icon">üìà</div>
                        <div class="level-info">
                            <h4>‡∏î‡πà‡∏≤‡∏ô 3</h4>
                            <p>‡∏≠‡πà‡∏≤‡∏ô‡∏Å‡∏£‡∏≤‡∏ü</p>
                        </div>
                    </button>
                    <button class="level-card" onclick="game.startLevel(4)">
                        <div class="level-icon">üßÆ</div>
                        <div class="level-info">
                            <h4>‡∏î‡πà‡∏≤‡∏ô 4</h4>
                            <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô</p>
                        </div>
                    </button>
                </div>

                <div class="menu-actions">
                    <button class="btn-secondary" onclick="ui.showLeaderboard()">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
                    <button class="btn-danger" onclick="game.logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°</button>
                </div>
            </div>
        </section>

        <!-- VIEW: GAME HUD & PLAY AREA -->
        <section id="view-game" class="view hidden">
            <!-- HUD -->
            <div class="hud">
                <div class="hud-item score-box">
                    <span class="hud-label">SCORE</span>
                    <span class="hud-value" id="gameScore">0</span>
                </div>
                <div class="hud-item timer-box">
                    <div class="timer-pie" id="timerPie"></div>
                    <span class="hud-value" id="gameTimer">30</span>
                </div>
                <div class="hud-item level-box">
                    <span class="hud-label">LEVEL</span>
                    <span class="hud-value" id="gameLevel">1</span>
                </div>
                <button class="btn-icon close-btn" onclick="game.quitLevel()">‚ùå</button>
            </div>

            <!-- Game Content Container -->
            <div class="game-content glass-panel" id="gameContent">
                <!-- Dynamic Content Injected Here -->
            </div>
        </section>

        <!-- VIEW: LEADERBOARD -->
        <section id="view-leaderboard" class="view hidden">
            <div class="glass-panel leaderboard-panel">
                <h2>üèÜ Hall of Fame</h2>
                <ul class="leaderboard-list" id="leaderboardList">
                    <!-- Populated by JS -->
                </ul>
                <button class="btn-primary" onclick="ui.showMenu()">‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π</button>
            </div>
        </section>

        <!-- Toast / Notification Overlay -->
        <div id="feedbackOverlay" class="feedback-overlay hidden">
            <div id="feedbackText">‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! +10</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/levels.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
